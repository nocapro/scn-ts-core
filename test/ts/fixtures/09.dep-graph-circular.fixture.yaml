id: dep-graph-circular
name: Complex Dependency Graph (Circular & Peer)
input:
  - path: src/moduleA.ts
    content: |
      import { funcB } from './moduleB';
      import { util } from './utils';

      export function funcA() {
        if (util.shouldRun()) funcB();
      }
  - path: src/moduleB.ts
    content: |
      import { funcA } from './moduleA';
      import { util } from './utils';

      export function funcB() {
        if (util.shouldRun()) funcA();
      }
  - path: src/utils.ts
    content: |
      export const util = { shouldRun: () => true };
  - path: src/main.ts
    content: |
      import { funcA } from './moduleA';
      funcA();
expected: |
  ยง (3) src/utils.ts
    <- (1.0), (2.0)
    + @ (3.1) util
      <- (1.1), (2.1)
      @ shouldRun

  ยง (1) src/moduleA.ts
    -> (2.0), (3.0)
    <- (2.1), (4.0)
    + ~ (1.1) funcA()
      -> (2.1), (3.1)
      <- (2.1), (4.0)

  ยง (2) src/moduleB.ts
    -> (1.0), (3.0)
    <- (1.1)
    + ~ (2.1) funcB()
      -> (1.1), (3.1)
      <- (1.1)

  ยง (4) src/main.ts
    -> (1.0)
    -> (1.1)