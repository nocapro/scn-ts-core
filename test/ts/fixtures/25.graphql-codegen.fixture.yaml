id: graphql-codegen
name: GraphQL Code Generation Flow
input:
  - path: src/graphql/queries.graphql
    content: |
      query GetUser($id: ID!) {
        user(id: $id) {
          id
          name
          email
        }
      }
  - path: src/graphql/generated.ts
    content: |
      /* eslint-disable */
      // THIS FILE IS AUTO-GENERATED by a tool. DO NOT EDIT.
      // Source: src/graphql/queries.graphql

      import { gql } from '@apollo/client';

      export const GetUserDocument = gql`...`; // Contains the query string

      export type User = { id: string, name: string, email: string };
      export function useGetUserQuery() { /* hook implementation */ }
  - path: src/components/UserProfile.tsx
    content: |
      import { useGetUserQuery, User } from '../graphql/generated';

      export function UserProfile({ id }) {
        const { data } = useGetUserQuery({ variables: { id } });
        if (!data) return <div>Loading...</div>;

        const user: User = data.user;
        return <h1>{user.name}</h1>;
      }
expected: |
  § 1 src/graphql/queries.graphql

  § 2 src/graphql/generated.ts [generated]
    < 3
    + @ 1 GetUserDocument
      < 3
    + =: 2 User #{ id:string, name:string, email:string }
      < 4
    + @ id: #string
      < 3
    + @ name: #string
      < 1
    + @ email: #string
      < 3
    + ~ 3 useGetUserQuery()
      < 1

  § 3 src/components/UserProfile.tsx
    > 2
    + ◇ 1 UserProfile
      > 2, 3
      + ⛶ 2 div
      + ⛶ 3 div
      + @ 4 user
        > 2
      + ⛶ 5 h1
      + ⛶ 6 h1